# å¼€å‘æŒ‡å—

## å¿«é€Ÿæ›´æ–°å…¨å±€å®‰è£…

### æ‰‹åŠ¨æ›´æ–°ï¼ˆæ¨èç”¨äºå‘å¸ƒå‰æµ‹è¯•ï¼‰

æ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°å…¨å±€å®‰è£…çš„ç‰ˆæœ¬ï¼š

```bash
# æ–¹å¼1: ä½¿ç”¨è„šæœ¬
./update-global.sh

# æ–¹å¼2: ä½¿ç”¨npmè„šæœ¬
npm run update-global
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. ğŸ§¹ æ¸…ç†ä¹‹å‰çš„æ„å»ºæ–‡ä»¶
2. ğŸ”¨ é‡æ–°æ„å»ºæ‰€æœ‰åŒ…
3. ğŸ—‘ï¸ å¸è½½æ—§çš„å…¨å±€ç‰ˆæœ¬
4. ğŸ“¦ å®‰è£…å½“å‰æœ¬åœ°ç‰ˆæœ¬åˆ°å…¨å±€
5. âœ… éªŒè¯å®‰è£…å’ŒåŠ«æŒé…ç½®

### è‡ªåŠ¨ç›‘æ§æ¨¡å¼ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰

å¯åŠ¨å¼€å‘ç›‘æ§æ¨¡å¼ï¼Œè‡ªåŠ¨ç›‘æ§æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°å®‰è£…ï¼š

```bash
# æ–¹å¼1: ä½¿ç”¨è„šæœ¬
./dev-watch.sh

# æ–¹å¼2: ä½¿ç”¨npmè„šæœ¬
npm run dev
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. ğŸ‘€ ç›‘æ§ `packages/` ç›®å½•ä¸‹çš„ `.ts`, `.tsx`, `.js`, `.json` æ–‡ä»¶
2. ğŸ“ æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨è¿è¡Œ `./update-global.sh`
3. â¹ï¸ æŒ‰ `Ctrl+C` é€€å‡ºç›‘æ§

#### ç³»ç»Ÿè¦æ±‚

**macOS ç”¨æˆ·**ï¼ˆæ¨èï¼‰ï¼š
```bash
brew install fswatch
```

**Linux ç”¨æˆ·**ï¼š
```bash
# Ubuntu/Debian
sudo apt-get install inotify-tools

# CentOS/RHEL
sudo yum install inotify-tools
```

## å¼€å‘å·¥ä½œæµ

### å…¸å‹å¼€å‘æµç¨‹

1. **å¯åŠ¨ç›‘æ§æ¨¡å¼**ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   npm run dev
   ```

2. **ä¿®æ”¹ä»£ç **ï¼š
   - ç¼–è¾‘ `packages/core/src/` æˆ– `packages/cli/src/` ä¸‹çš„æ–‡ä»¶
   - ä¿å­˜æ–‡ä»¶åä¼šè‡ªåŠ¨è§¦å‘é‡æ–°æ„å»ºå’Œå®‰è£…

3. **æµ‹è¯•æ›´æ”¹**ï¼š
   ```bash
   # åœ¨ä»»ä½•ç›®å½•æµ‹è¯•
   gemini -m gemini-2.5-flash -p "æµ‹è¯•æ¶ˆæ¯"
   ```

### æ‰‹åŠ¨å·¥ä½œæµ

å¦‚æœä¸æƒ³ä½¿ç”¨ç›‘æ§æ¨¡å¼ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

1. **ä¿®æ”¹ä»£ç **
2. **æ‰‹åŠ¨æ›´æ–°**ï¼š
   ```bash
   npm run update-global
   ```
3. **æµ‹è¯•æ›´æ”¹**

## åŠ«æŒé…ç½®éªŒè¯

æ›´æ–°è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥åŠ«æŒé…ç½®çŠ¶æ€ï¼š

```bash
# è„šæœ¬è¾“å‡ºç¤ºä¾‹
âœ… åŠ«æŒé…ç½®å·²å¯ç”¨
ğŸ·ï¸  å½“å‰æ´»è·ƒæä¾›å•†: HIJACK
```

å¦‚æœçœ‹åˆ°è­¦å‘Šä¿¡æ¯ï¼Œè¯·æ£€æŸ¥ `~/.gemini/.env` æ–‡ä»¶é…ç½®ã€‚

## æ•…éšœæ’é™¤

### 1. å…¨å±€å‘½ä»¤æ‰¾ä¸åˆ°

```bash
# æ£€æŸ¥å®‰è£…ä½ç½®
which gemini

# é‡æ–°å®‰è£…
npm run update-global
```

### 2. ç‰ˆæœ¬ä¸åŒ¹é…

```bash
# æ£€æŸ¥ç‰ˆæœ¬
gemini --version
cat package.json | grep version

# å¼ºåˆ¶é‡æ–°å®‰è£…
npm uninstall -g @fanzheng/gemini-cli-hijack
npm run update-global
```

### 3. åŠ«æŒé…ç½®ä¸ç”Ÿæ•ˆ

```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat ~/.gemini/.env | grep HIJACK

# ç¡®ä¿åŒ…å«ä»¥ä¸‹åŸºæœ¬é…ç½®ï¼š
# HIJACK_ENABLED=true
# HIJACK_ACTIVE_PROVIDER=HIJACK
# HIJACK_API_ENDPOINT=http://your-endpoint/v1
# HIJACK_ACTUAL_MODEL=your-model-name
# HIJACK_API_KEY=your-api-key
```

### 4. ç›‘æ§æ¨¡å¼ä¸å·¥ä½œ

```bash
# macOS å®‰è£… fswatch
brew install fswatch

# Linux å®‰è£… inotify-tools
sudo apt-get install inotify-tools  # Ubuntu/Debian
sudo yum install inotify-tools      # CentOS/RHEL
```

## å…¶ä»–æœ‰ç”¨å‘½ä»¤

```bash
# åªæ„å»ºä¸å®‰è£…
npm run build

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean

# è¿è¡Œæµ‹è¯•
npm test

# è¿è¡Œä»£ç æ£€æŸ¥
npm run preflight
```

## æç¤º

- ğŸš€ **æ¨èä½¿ç”¨ç›‘æ§æ¨¡å¼**ï¼šå¼€å‘æ—¶è¿è¡Œ `npm run dev`ï¼Œä¿å­˜æ–‡ä»¶å³å¯è‡ªåŠ¨æ›´æ–°
- ğŸ“ **æµ‹è¯•é¢‘ç¹**ï¼šæ¯æ¬¡é‡è¦æ›´æ”¹åéƒ½è¦æµ‹è¯•åŠ«æŒåŠŸèƒ½æ˜¯å¦æ­£å¸¸
- ğŸ”„ **ç‰ˆæœ¬ç®¡ç†**ï¼šé‡è¦åŠŸèƒ½å®Œæˆåè€ƒè™‘å‡ç‰ˆæœ¬å·
- ğŸ› **é—®é¢˜è°ƒè¯•**ï¼šå¦‚æœé‡åˆ°é—®é¢˜ï¼Œå…ˆè¿è¡Œ `npm run update-global` ç¡®ä¿ä½¿ç”¨æœ€æ–°ä»£ç 