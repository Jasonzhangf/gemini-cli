# Gemini CLI v0.1.14.0 - Memory System & Task Management Enhancement

## 🎉 主要功能更新

### 🧠 记忆系统全面升级

#### **简化Hash命令**
- **超简洁操作**: 
  - `#g <内容>` - 保存全局记忆
  - `#p <内容>` - 保存项目记忆  
  - `#v` - 查看记忆统计
  - `# <内容>` - 智能类型选择

#### **智能用户体验**
- **安静模式**: 输入 `#` 不再自动弹出菜单
- **智能提示**: 未指定类型时提供简化的选择建议
- **即时保存**: 一条命令直接保存，无需菜单选择
- **向后兼容**: 保留所有原有命令格式

#### **记忆存储系统**
- **全局记忆**: `~/.gemini/globalrules/Memory.md`
- **项目记忆**: `./gemini/localrules/Memory.md`
- **自动管理**: 智能创建目录和文件，内容追加到文件末尾

### 🎯 任务系统重大更新

#### **标准化上下文集成**
- **四层上下文结构**: `{系统上下文},{静态上下文},{动态上下文},{任务上下文}`
- **项目感知存储**: 使用可读目录名替代MD5哈希
- **双层静态上下文**: 全局规则 + 项目规则分离管理

#### **增强任务管理**
- **工作流模板**: 内置开发工作流模板支持
- **自动上下文发现**: 智能分析项目结构和依赖
- **任务状态跟踪**: 完整的任务生命周期管理
- **进度可视化**: 显示完整任务列表和当前进度

#### **路径处理优化**
- **智能路径转换**: 自动处理绝对/相对路径转换
- **安全路径检查**: 危险工具自动转换为相对路径
- **参数映射修复**: 工具参数名称准确映射

### 🔧 工具调用系统优化

#### **解析引擎增强**
- **多格式支持**: 支持 `[tool_call: finish_current_task]` 等简单格式
- **重复处理防护**: 防止同一工具调用被重复解析
- **失败重试机制**: 失败的工具调用不再被永久标记，支持重试

#### **跟踪统计系统**
- **四阶段跟踪**: discovered → attempted → succeeded → failed
- **调试信息增强**: 详细的工具调用统计和日志
- **性能监控**: 工具调用执行状态实时跟踪

## 🛠️ 技术改进

### **OpenAI兼容性增强**
- **工具调用解析**: 修复文本引导工具调用的解析问题
- **去重机制优化**: 仅在成功执行后标记工具调用为已处理
- **错误恢复**: 改进的错误处理和重试逻辑

### **TypeScript类型安全**
- **类型系统完善**: 所有新功能都有完整的类型定义
- **编译时检查**: 确保代码质量和运行时安全

### **模块化架构**
- **上下文管理**: 独立的上下文集成器模块
- **工具系统**: 可扩展的工具注册和管理系统
- **存储服务**: 分离的持久化存储层

## 📋 使用示例

### 记忆系统快速上手
```bash
# 保存编程技巧到全局记忆
#g React Hook的最佳实践是避免在循环中调用

# 保存项目特定信息
#p 这个项目的API密钥存在环境变量REACT_APP_API_KEY中

# 查看记忆统计
#v

# 智能类型选择
# 学到了一个新的调试技巧
# 系统会显示: #g 学到了一个新的调试技巧 (全局) 或 #p ... (项目)
```

### 任务系统工作流
```bash
# 创建开发任务流
/tasks template explore-plan-code-test "实现用户认证系统"

# 查看当前任务
/tasks current

# 完成当前任务
/tasks finish
```

## 🔄 向后兼容性

- 所有原有命令格式继续支持
- 现有配置文件无需修改
- 平滑升级，无破坏性变更

## 📦 安装与升级

```bash
# 升级到最新版本
npm update -g @google/gemini-cli

# 验证版本
gemini --version  # 应显示 0.1.14.0
```

---

**版本**: 0.1.14.0  
**发布日期**: 2025年1月  
**主要贡献**: 记忆系统重构、任务管理增强、工具调用优化